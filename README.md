# CruchCount（离线零食店收银工具）

CruchCount 是一个基于 **PyQt6** 的本地收银小工具，用于零食店场景下的快速结账。  
核心目标：通过“条码 + 商品信息 + 售价”的本地管理，实现扫码枪快速加入购物车并结账，全程无需联网。

## 1. 项目目标

- 面向门店工作人员，降低手工输入成本。
- 通过扫码枪支持连续扫码，提升高峰期收银效率。
- 所有数据本地存储，离线可用，避免网络依赖。

## 2. 业务范围

本项目仅包含两个页面，通过两个按钮切换：

1. **入库页面**：维护商品主数据（条码、名称、售价）。
2. **购物车页面**：扫码或手动输入条码，将商品加入购物车并结账。

## 3. 核心规则

- 条码是商品唯一标识。
- 入库时若条码已存在，则执行覆盖更新（以最新输入为准）。
- 扫码加入购物车默认数量为 `1`；重复扫码同一条码时，数量累计。
- 扫到未入库条码时，弹出提示框并允许直接输入价格，保证结账不断流。

## 4. 主要功能

### 4.1 入库页面

- 输入字段：
  - 条码（必填）
  - 商品名称（必填）
  - 售价（必填，数值）
- 点击“保存/入库”后：
  - 若条码不存在：新增商品。
  - 若条码已存在：覆盖商品名称和售价。

### 4.2 购物车页面

支持两种加购方式：

1. **扫码枪连续扫码**
   - 扫码后自动加入购物车。
   - 支持连续输入（扫码枪通常会以回车作为结束符）。
   - 已在购物车中的商品，数量 `+1`。

2. **手动输入条码**
   - 输入框支持联想下拉匹配（根据已入库商品匹配前缀/关键词）。
   - 选择候选后可直接加入购物车。

异常场景处理：

- 未入库商品：弹出“未入库”提示框。
- 提示框中允许输入临时价格并确认加入购物车，避免打断收银流程。

## 5. 非功能要求

- 离线运行：不依赖外部网络。
- 本地持久化：商品与结账相关数据保存在本机。
- 易操作：界面简洁，键盘操作优先，适配扫码枪高频输入。

## 6. 推荐技术栈

- GUI：`PyQt6`
- 本地存储：`SQLite`（推荐）
- 运行环境：Python 3.13+

## 7. 文档目录

- 详细设计与交互说明：`docs/项目文档.md`

## 8. 开发阶段建议

1. 搭建主窗口与页面切换骨架。
2. 完成商品入库（含覆盖逻辑）。
3. 完成购物车（扫码输入、手动联想、数量累计）。
4. 完成“未入库条码临时定价”弹窗流程。
5. 完成结账与基础报错提示。
